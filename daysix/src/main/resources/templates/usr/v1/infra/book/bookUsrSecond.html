<!doctype html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
<!-- Basic Page Needs -->
<meta charset="utf-8">
<title>AMovie - Booking step 2</title>
<meta name="description" content="A Template by Gozha.net">
<meta name="keywords" content="HTML, CSS, JavaScript">
<meta name="author" content="Gozha.net">

<!-- Mobile Specific Metas-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta content="telephone=no" name="format-detection">

<!-- Fonts -->
<!-- Font awesome - icon font -->
<link
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
	rel="stylesheet">
<!-- Roboto -->
<link href='http://fonts.googleapis.com/css?family=Roboto:400,700'
	rel='stylesheet' type='text/css'>

<!-- Stylesheets -->

<!-- Mobile menu -->
<link href="/usr/v1/template/themeforest-1.0.0/css/gozha-nav.css" rel="stylesheet" />
<!-- Select -->
<link href="/usr/v1/template/themeforest-1.0.0/css/external/jquery.selectbox.css" rel="stylesheet" />

<!-- Custom -->
<link href="/usr/v1/template/themeforest-1.0.0/css/style.css?v=1" rel="stylesheet" />

<!-- Modernizr -->
<script src="/usr/v1/template/themeforest-1.0.0/js/external/modernizr.custom.js"></script>

<!-- 0_style.css -->
<link rel="stylesheet" href="/usr/v1/template/themeforest-1.0.0/css/0_style.css">

<!-- Favicon -->
<link rel="icon" href="/usr/v1/template/themeforest-1.0.0/0_images/favicon/img-cat.jpg">


</head>

<body>
	<div class="wrapper place-wrapper">
		<!-- Header section -->
		<header class="header-wrapper">
			<th:block th:replace="~{usr/v1/infra/include/head :: head}"></th:block>
		</header>

		<!-- Search bar -->
		<div class="search-wrapper">
			<div class="container container--add">
				<form id='search-form' method='get' class="search">
					<input type="text" class="search__field" placeholder="찾기">
					<select name="sorting_item" id="search-sort" class="search__sort"
						tabindex="0">
						<option value="1" selected='selected'>콘서트</option>
						<option value="2">가수</option>
						<option value="3">장르</option>
					</select>
					<button type='submit' class="btn btn-md btn--danger search__button">콘서트
						검색</button>
				</form>
			</div>
		</div>

		<!-- Main content -->
		<div class="place-form-area">
			<section class="container">
				<div class="order-container">
					<div class="order">
						<img class="order__images" alt='' src="/usr/v1/template/themeforest-1.0.0/images/tickets.png">
						<p class="order__title">
							티켓 예매 <br>
							<span class="order__descript">신나는 콘서트</span>
						</p>
					</div>
				</div>
				<div class="order-step-area">
					<div class="order-step first--step order-step--disable ">1.
						콘서트 &amp; 장소 &amp; 시간</div>
					<div class="order-step second--step">2. 좌석 선택</div>
				</div>

				<div class="choose-sits">
					<div class="choose-sits__info choose-sits__info--first">
						<ul>
							<li class="sits-price marker--none"><strong>가격</strong></li>
							<li class="sits-price sits-price--cheap">120,000</li>
							<li class="sits-price sits-price--middle">240,000</li>
							<li class="sits-price sits-price--expensive">360,000</li>
						</ul>
					</div>

					<div class="choose-sits__info">
						<ul>
							<li class="sits-state sits-state--not">불가</li>
							<li class="sits-state sits-state--your">선택</li>
						</ul>
					</div>

					<div class="col-sm-12 col-lg-10 col-lg-offset-1">
						<div class="sits-area hidden-xs">
							<div class="sits-anchor">STAGE</div>

							<div class="sits">
								<aside class="sits__line">
									<span class="sits__indecator">A</span> <span
										class="sits__indecator">B</span> <span class="sits__indecator">C</span>
									<span class="sits__indecator">D</span> <span
										class="sits__indecator">E</span> <span class="sits__indecator">F</span>
									<span class="sits__indecator">G</span> <span
										class="sits__indecator">I</span> <span
										class="sits__indecator additional-margin">J</span> <span
										class="sits__indecator">K</span> <span class="sits__indecator">L</span>
								</aside>

								<div class="sits__row">
									<span class="sits__place sits-price--cheap" th:attr="data-place=${listSeatA.stName}, data-price=${listSeatA.stPrice}"
										th:each="listSeatA:${listSeatA}" th:text="${listSeatA.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--cheap" th:attr="data-place=${listSeatB.stName}, data-price=${listSeatB.stPrice}"
										th:each="listSeatB:${listSeatB}" th:text="${listSeatB.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--cheap" th:attr="data-place=${listSeatC.stName}, data-price=${listSeatC.stPrice}"
										th:each="listSeatC:${listSeatC}" th:text="${listSeatC.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--cheap" th:attr="data-place=${listSeatD.stName}, data-price=${listSeatD.stPrice}"
										th:each="listSeatD:${listSeatD}" th:text="${listSeatD.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--middle" th:attr="data-place=${listSeatE.stName}, data-price=${listSeatE.stPrice}"
										th:each="listSeatE:${listSeatE}" th:text="${listSeatE.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--middle" th:attr="data-place=${listSeatF.stName}, data-price=${listSeatF.stPrice}"
										th:each="listSeatF:${listSeatF}" th:text="${listSeatF.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--middle" th:attr="data-place=${listSeatG.stName}, data-price=${listSeatG.stPrice}"
										th:each="listSeatG:${listSeatG}" th:text="${listSeatG.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--middle" th:attr="data-place=${listSeatI.stName}, data-price=${listSeatI.stPrice}"
										th:each="listSeatI:${listSeatI}" th:text="${listSeatI.stName}"></span>
								</div>

								<div class="sits__row additional-margin">
									<span class="sits__place sits-price--expensive" th:attr="data-place=${listSeatJ.stName}, data-price=${listSeatJ.stPrice}"
										th:each="listSeatJ:${listSeatJ}" th:text="${listSeatJ.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--expensive" th:attr="data-place=${listSeatK.stName}, data-price=${listSeatK.stPrice}"
										th:each="listSeatK:${listSeatK}" th:text="${listSeatK.stName}"></span>
								</div>

								<div class="sits__row">
									<span class="sits__place sits-price--expensive" th:attr="data-place=${listSeatL.stName}, data-price=${listSeatL.stPrice}"
										th:each="listSeatL:${listSeatL}" th:text="${listSeatL.stName}"></span>
								</div>

								<aside class="sits__checked">
									<div class="checked-place"></div>
									<div class="checked-result"></div>
								</aside>
								<footer class="sits__number">
									<span class="sits__indecator">1</span> <span
										class="sits__indecator">2</span> <span class="sits__indecator">3</span>
									<span class="sits__indecator">4</span> <span
										class="sits__indecator">5</span> <span class="sits__indecator">6</span>
									<span class="sits__indecator">7</span> <span
										class="sits__indecator">8</span> <span class="sits__indecator">9</span>
									<span class="sits__indecator">10</span> <span
										class="sits__indecator">11</span> <span
										class="sits__indecator">12</span> <span
										class="sits__indecator">13</span> <span
										class="sits__indecator">14</span> <span
										class="sits__indecator">15</span> <span
										class="sits__indecator">16</span> <span
										class="sits__indecator">17</span> <span
										class="sits__indecator">18</span>
								</footer>
							</div>
						</div>
					</div>

					

				</div>
		</div>
		</section>
	</div>



	<div class="clearfix"></div>
	<form id='film-and-time' class="booking-form" method='get'
		action='book3-buy.html'>

		<input type='text' name='choosen-number' class="choosen-number">
		<input type='text' name='choosen-number--cheap'
			class="choosen-number--cheap"> <input type='text'
			name='choosen-number--middle' class="choosen-number--middle">
		<input type='text' name='choosen-number--expansive'
			class="choosen-number--expansive"> <input type='text'
			name='choosen-cost' class="choosen-cost"> <input type='text'
			name='choosen-sits' class="choosen-sits">


		<div class="booking-pagination booking-pagination--margin">
			<a href="/v1/infra/book/bookUsrFirst" class="booking-pagination__prev"> <span
				class="arrow__text arrow--prev">이전 단계</span> <span
				class="arrow__info">콘서트&amp;장소&amp;시간</span>
			</a> <a href="/v1/infra/book/bookUsrThird" class="booking-pagination__next"> <span
				class="arrow__text arrow--next">다음 단계</span> <span
				class="arrow__info">체크아웃</span>
			</a>
		</div>
	</form>

	<div class="clearfix"></div>

	<th:block th:replace="~{usr/v1/infra/include/footer :: footer}"></th:block>
	
	</div>

	<!-- open/close -->
	<div class="overlay overlay-hugeinc">

		<section class="container">

			<div class="col-sm-4 col-sm-offset-4">
				<button type="button" class="overlay-close">Close</button>
				<form id="login-form" class="login" method='get' novalidate=''>
					<p class="login__title">
						로그인 <br>
						<span class="login-edition">welcome to A.Movie</span>
					</p>

					<div class="social social--colored">
						<a href='#' class="social__variant fa fa-facebook"></a> <a
							href='#' class="social__variant fa fa-twitter"></a> <a href='#'
							class="social__variant fa fa-tumblr"></a>
					</div>

					<p class="login__tracker">or</p>

					<div class="field-wrap">
						<input type='email' placeholder='이메일' name='user-email'
							class="login__input"> <input type='password'
							placeholder='비밀번호' name='user-password' class="login__input">

						<input type='checkbox' id='#informed' class='login__check styled'>
						<label for='#informed' class='login__check-info'>회원정보 기억하기</label>
					</div>

					<div class="login__control">
						<button type='submit' class="btn btn-md btn--warning btn--wider">로그인</button>
						<a href="#" class="login__tracker form__tracker">비밀번호를 잊으셨나요?</a>
					</div>
				</form>
			</div>

		</section>
	</div>

	<!-- JavaScript-->
	<!-- jQuery 3.1.1-->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script>
		window.jQuery
				|| document
						.write('<script src="/usr/v1/template/themeforest-1.0.0/js/external/jquery-3.1.1.min.js"><\/script>')
	</script>
	<!-- Migrate -->
	<script src="/usr/v1/template/themeforest-1.0.0/js/external/jquery-migrate-1.2.1.min.js"></script>
	<!-- Bootstrap 3-->
	<script
		src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>

	<!-- Mobile menu -->
	<script src="/usr/v1/template/themeforest-1.0.0/js/jquery.mobile.menu.js"></script>
	<!-- Select -->
	<script src="/usr/v1/template/themeforest-1.0.0/js/external/jquery.selectbox-0.2.min.js"></script>

	<!-- Form element -->
	<script src="/usr/v1/template/themeforest-1.0.0/js/external/form-element.js"></script>
	<!-- Form validation -->
	<script src="/usr/v1/template/themeforest-1.0.0/js/form.js"></script>

	<!-- Custom -->
	<script src="/usr/v1/template/themeforest-1.0.0/js/custom.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {
			init_BookingTwo();
		});
	</script>
	
	<script type="text/javascript">
	    window.onload = function() {
	        var price = document.querySelector(".checked-result");
	        if (price) {
	            price.textContent = "0원";
	        }
	    };
	</script>
	
	<script type="text/javascript">
		document.addEventListener("DOMContentLoaded", function(){
			document.querySelector(".booking-pagination__next").onclick = function(){
				var bookCount = document.querySelectorAll(".choosen-place").length;
				var bookSeat = document.querySelectorAll(".choosen-place");
				var bookSeats = [];
				bookSeat.forEach(function(span){
					bookSeats.push(span.textContent);
				});
				var bookPriceText = document.querySelector(".checked-result").textContent;
				var bookPriceTrim = bookPriceText.replace("원", "").trim();
				var bookPrice = parseInt(bookPriceTrim, 10);
				
				var bookNo = Math.random().toString(16).substr(2,6);
				
				$.ajax({
					async: true 
					,cache: false
					,type: "post"
					,url: "/v1/infra/book/bookUsrSecondProc"
					,data : {bookCount : bookCount, bookPrice : bookPrice, bookSeats : bookSeats, bookNo : bookNo}
					,success: function(response) {
						if(response.rt == "success") {
							
						} else {
// 							by pass
						}
					}
					,error : function(jqXHR, textStatus, errorThrown){
						alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
					}
				});
				
			}
		});
	</script>
	
	<script type="text/javascript">
    	document.querySelector('.btn--singin').onclick = function() {
    		var auth = document.querySelector('.auth__function');
    		auth.classList.toggle('open-function');
    	}
    </script>

</body>
</html>
